# mysql-connector.interface.接口


## Connector/Python API Reference

### connection.MySQLConnection Class
| item                                    | classfication | explaination |
| --------------------------------------- | ------------- | ------------ |
| connection.MySQLConnection()            | Constructor   |              |
| MySQLConnection.close()                 | Method        |              |
| MySQLConnection.commit()                | Method        |              |
| MySQLConnection.config()                | Method        |              |
| MySQLConnection.connect()               | Method        |              |
| MySQLConnection.cursor()                | Method        |              |
| MySQLConnection.cmd_change_user()       | Method        |              |
| MySQLConnection.cmd_debug()             | Method        |              |
| MySQLConnection.cmd_init_db()           | Method        |              |
| MySQLConnection.cmd_ping()              | Method        |              |
| MySQLConnection.cmd_process_info()      | Method        |              |
| MySQLConnection.cmd_process_kill()      | Method        |              |
| MySQLConnection.cmd_query()             | Method        |              |
| MySQLConnection.cmd_query_iter()        | Method        |              |
| MySQLConnection.cmd_quit()              | Method        |              |
| MySQLConnection.cmd_refresh()           | Method        |              |
| MySQLConnection.cmd_reset_connection()  | Method        |              |
| MySQLConnection.cmd_shutdown()          | Method        |              |
| MySQLConnection.cmd_statistics()        | Method        |              |
| MySQLConnection.disconnect()            | Method        |              |
| MySQLConnection.get_row()               | Method        |              |
| MySQLConnection.get_rows()              | Method        |              |
| MySQLConnection.get_server_info()       | Method        |              |
| MySQLConnection.get_server_version()    | Method        |              |
| MySQLConnection.is_connected()          | Method        |              |
| MySQLConnection.isset_client_flag()     | Method        |              |
| MySQLConnection.ping()                  | Method        |              |
| MySQLConnection.reconnect()             | Method        |              |
| MySQLConnection.reset_session()         | Method        |              |
| MySQLConnection.rollback()              | Method        |              |
| MySQLConnection.set_charset_collation() | Method        |              |
| MySQLConnection.set_client_flags()      | Method        |              |
| MySQLConnection.shutdown()              | Method        |              |
| MySQLConnection.start_transaction()     | Method        |              |
| MySQLConnection.autocommit              | Property      |              |
| MySQLConnection.unread_results          | Property      |              |
| MySQLConnection.can_consume_results     | Property      |              |
| MySQLConnection.charset                 | Property      |              |
| MySQLConnection.collation               | Property      |              |
| MySQLConnection.connection_id           | Property      |              |
| MySQLConnection.database                | Property      |              |
| MySQLConnection.get_warnings            | Property      |              |
| MySQLConnection.in_transaction          | Property      |              |
| MySQLConnection.raise_on_warnings       | Property      |              |
| MySQLConnection.server_host             | Property      |              |
| MySQLConnection.server_port             | Property      |              |
| MySQLConnection.sql_mode                | Property      |              |
| MySQLConnection.time_zone               | Property      |              |
| MySQLConnection.unix_socket             | Property      |              |
| MySQLConnection.user                    | Property      |              |
|                                         |               |              |

#### connection.MySQLConnection() arguments
| Argument Name                         | Default                                                                          | Description                                                                                                                                                                                                                                                                                                                                                                                                                 |
| ------------------------------------- | -------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| user (username*)                      |                                                                                  | The user name used to authenticate with the MySQL server.                                                                                                                                                                                                                                                                                                                                                                   |
| password (passwd*)                    |                                                                                  | The password to authenticate the user with the MySQL server.                                                                                                                                                                                                                                                                                                                                                                |
| database (db*)                        |                                                                                  | The database name to use when connecting with the MySQL server.                                                                                                                                                                                                                                                                                                                                                             |
| host                                  | 127.0.0.1                                                                        | The host name or IP address of the MySQL server.                                                                                                                                                                                                                                                                                                                                                                            |
| port                                  | 3306                                                                             | The TCP/IP port of the MySQL server. Must be an integer.                                                                                                                                                                                                                                                                                                                                                                    |
| unix_socket                           |                                                                                  | The location of the Unix socket file.                                                                                                                                                                                                                                                                                                                                                                                       |
| auth_plugin                           |                                                                                  | Authentication plugin to use. Added in 1.2.1.                                                                                                                                                                                                                                                                                                                                                                               |
| use_unicode                           | True                                                                             | Whether to use Unicode.                                                                                                                                                                                                                                                                                                                                                                                                     |
| charset                               | utf8                                                                             | Which MySQL character set to use.                                                                                                                                                                                                                                                                                                                                                                                           |
| collation                             | utf8mb4_general_ai_ci (is utf8_general_ci in 2.x                                 | Which MySQL collation to use. The 8.x default values are generated from the latest MySQL Server 8.0 defaults.                                                                                                                                                                                                                                                                                                               |
| autocommit                            | False                                                                            | Whether to autocommit transactions.                                                                                                                                                                                                                                                                                                                                                                                         |
| time_zone                             |                                                                                  | Set the time_zone session variable at connection time.                                                                                                                                                                                                                                                                                                                                                                      |
| sql_mode                              |                                                                                  | Set the sql_mode session variable at connection time.                                                                                                                                                                                                                                                                                                                                                                       |
| get_warnings                          | False                                                                            | Whether to fetch warnings.                                                                                                                                                                                                                                                                                                                                                                                                  |
| raise_on_warnings                     | False                                                                            | Whether to raise an exception on warnings.                                                                                                                                                                                                                                                                                                                                                                                  |
| connection_timeout (connect_timeout*) |                                                                                  | Timeout for the TCP and Unix socket connections.                                                                                                                                                                                                                                                                                                                                                                            |
| client_flags                          |                                                                                  | MySQL client flags.                                                                                                                                                                                                                                                                                                                                                                                                         |
| buffered                              | False                                                                            | Whether cursor objects fetch the results immediately after executing queries.                                                                                                                                                                                                                                                                                                                                               |
| raw                                   | False                                                                            | Whether MySQL results are returned as is, rather than converted to Python types.                                                                                                                                                                                                                                                                                                                                            |
| consume_results                       | False                                                                            | Whether to automatically read result sets.                                                                                                                                                                                                                                                                                                                                                                                  |
| ssl_ca                                |                                                                                  | File containing the SSL certificate authority.                                                                                                                                                                                                                                                                                                                                                                              |
| ssl_cert                              |                                                                                  | File containing the SSL certificate file.                                                                                                                                                                                                                                                                                                                                                                                   |
| ssl_disabled                          | False                                                                            | True disables SSL/TLS usage. Option added in Connector/Python 2.1.7.                                                                                                                                                                                                                                                                                                                                                        |
| ssl_key                               |                                                                                  | File containing the SSL key.                                                                                                                                                                                                                                                                                                                                                                                                |
| ssl_verify_cert                       | False                                                                            | When set to True, checks the server certificate against the certificate file specified by the ssl_ca option. Any mismatch causes a ValueError exception.                                                                                                                                                                                                                                                                    |
| ssl_verify_identity                   | False                                                                            | When set to True, additionally perform host name identity verification by checking the host name that the client uses for connecting to the server against the identity in the certificate that the server sends to the client. Option added in Connector/Python 8.0.14.                                                                                                                                                    |
| force_ipv6                            | False                                                                            | When set to True, uses IPv6 when an address resolves to both IPv4 and IPv6. By default, IPv4 is used in such cases.                                                                                                                                                                                                                                                                                                         |
| dsn                                   |                                                                                  | Not supported (raises NotSupportedError when used).                                                                                                                                                                                                                                                                                                                                                                         |
| pool_name                             |                                                                                  | Connection pool name. The pool name is restricted to alphanumeric characters and the special characters ., _, *, $, and #. The pool name must be no more than pooling.CNX_POOL_MAXNAMESIZE characters long (default 64).                                                                                                                                                                                                    |
| pool_size                             | 5                                                                                | Connection pool size. The pool size must be greater than 0 and less than or equal to pooling.CNX_POOL_MAXSIZE (default 32).                                                                                                                                                                                                                                                                                                 |
| pool_reset_session                    | True                                                                             | Whether to reset session variables when connection is returned to pool.                                                                                                                                                                                                                                                                                                                                                     |
| compress                              | False                                                                            | Whether to use compressed client/server protocol.                                                                                                                                                                                                                                                                                                                                                                           |
| converter_class                       |                                                                                  | Converter class to use.                                                                                                                                                                                                                                                                                                                                                                                                     |
| failover                              |                                                                                  | Server failover sequence.                                                                                                                                                                                                                                                                                                                                                                                                   |
| option_files                          |                                                                                  | Which option files to read. Added in 2.0.0.                                                                                                                                                                                                                                                                                                                                                                                 |
| option_groups                         | ['client', 'connector_python']                                                   | Which groups to read from option files. Added in 2.0.0.                                                                                                                                                                                                                                                                                                                                                                     |
| allow_local_infile                    | True                                                                             | Whether to enable LOAD DATA LOCAL INFILE. Added in 2.0.0.                                                                                                                                                                                                                                                                                                                                                                   |
| use_pure                              | False as of 8.0.11, and True in earlier versions.                                | If only one implementation (C or Python) is available, then then the default value is set to enable the available implementation.</br>Whether to use pure Python or C Extension. If use_pure=False and the C Extension is not available, then Connector/Python will automatically fall back to the pure Python implementation. Can be set with mysql.connector.connect() but not MySQLConnection.connect(). Added in 2.1.1. |
| krb_service_principal                 | The "@realm" defaults to the default realm, as configured in the krb5.conf file. | Must be a string in the form "primary/instance@realm" such as "ldap/ldapauth@MYSQL.COM" where "@realm" is optional. Added in 8.0.23.                                                                                                                                                                                                                                                                                        |
|                                       |                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                             |


### pooling.MySQLConnectionPool Class
| item                                 | classfication | explaination |
| ------------------------------------ | ------------- | ------------ |
| pooling.MySQLConnectionPool          | Constructor   |              |
| MySQLConnectionPool.add_connection() | Method        |              |
| MySQLConnectionPool.get_connection() | Method        |              |
| MySQLConnectionPool.set_config()     | Method        |              |
| MySQLConnectionPool.pool_name        | Property      |              |


### pooling.PooledMySQLConnection Class
| item                            | classfication | explaination |
| ------------------------------- | ------------- | ------------ |
| pooling.PooledMySQLConnection   | Constructor   |              |
| PooledMySQLConnection.close()   | Method        |              |
| PooledMySQLConnection.config()  | Method        |              |
| PooledMySQLConnection.pool_name | Property      |              |


### cursor.MySQLCursor Class
| item                         | classfication | explaination |
| ---------------------------- | ------------- | ------------ |
| cursor.MySQLCursor           | Constructor   |              |
| MySQLCursor.callproc()       | Method        |              |
| MySQLCursor.close()          | Method        |              |
| MySQLCursor.execute()        | Method        |              |
| MySQLCursor.executemany()    | Method        |              |
| MySQLCursor.fetchall()       | Method        |              |
| MySQLCursor.fetchmany()      | Method        |              |
| MySQLCursor.fetchone()       | Method        |              |
| MySQLCursor.fetchwarnings()  | Method        |              |
| MySQLCursor.stored_results() | Method        |              |
| MySQLCursor.column_names     | Property      |              |
| MySQLCursor.description      | Property      |              |
| MySQLCursor.lastrowid        | Property      |              |
| MySQLCursor.rowcount         | Property      |              |
| MySQLCursor.statement        | Property      |              |
| MySQLCursor.with_rows        | Property      |              |


### Subclasses cursor.MySQLCursor
| item                                 | classfication | explaination |
| ------------------------------------ | ------------- | ------------ |
| cursor.MySQLCursorBuffered           | Class         |              |
| cursor.MySQLCursorRaw                | Class         |              |
| cursor.MySQLCursorBufferedRaw        | Class         |              |
| cursor.MySQLCursorDict               | Class         |              |
| cursor.MySQLCursorBufferedDict       | Class         |              |
| cursor.MySQLCursorNamedTuple         | Class         |              |
| cursor.MySQLCursorBufferedNamedTuple | Class         |              |
| cursor.MySQLCursorPrepared           | Class         |              |


### constants
| item                    | classfication | explaination |
| ----------------------- | ------------- | ------------ |
| constants.ClientFlag    | Class         |              |
| constants.FieldType     | Class         |              |
| constants.SQLMode       | Class         |              |
| constants.CharacterSet  | Class         |              |
| constants.RefreshOption | Class         |              |


### Errors and Exceptions
| item                            | classfication | explaination |
| ------------------------------- | ------------- | ------------ |
| errorcode                       | Module        |              |
| errors.Error                    | Exception     |              |
| errors.DataError                | Exception     |              |
| errors.DatabaseError            | Exception     |              |
| errors.IntegrityError           | Exception     |              |
| errors.InterfaceError           | Exception     |              |
| errors.InternalError            | Exception     |              |
| errors.NotSupportedError        | Exception     |              |
| errors.OperationalError         | Exception     |              |
| errors.PoolError                | Exception     |              |
| errors.ProgrammingError         | Exception     |              |
| errors.Warning                  | Exception     |              |
| errors.custom_error_exception() | Function      |              |


## Connector/Python C Extension API Reference






## 初始化连接 connector
```py
import mysql.connector

cnx = mysql.connector.connect(user='learn', password='password',
                              host='127.0.0.1',
                              database='employees')
cnx.close()
```




### 利用 try except 处理连接错误
```py
import mysql.connector
from mysql.connector import errorcode

try:
  cnx = mysql.connector.connect(user='learn',
                                database='employ')
except mysql.connector.Error as err:
  if err.errno == errorcode.ER_ACCESS_DENIED_ERROR:
    print("Something is wrong with your user name or password")
  elif err.errno == errorcode.ER_BAD_DB_ERROR:
    print("Database does not exist")
  else:
    print(err)
else:
  cnx.close()
```


### 使用字典配置登录参数
```py
import mysql.connector

config = {
  'user': 'learn',
  'password': 'password',
  'host': '127.0.0.1',
  'database': 'employees',
  'raise_on_warnings': True
}

cnx = mysql.connector.connect(**config)

cnx.close()
```





### 使用 Python 或 C 扩展

Connector/Python offers two implementations: 
* a pure Python interface and 
* a C extension that uses the MySQL C client library

使用 use_pure 指定何种扩展，True为Python扩展，False为C扩展
如果C扩展在系统中不可用，则 use_pure 默认为 True 。

MySQL 8 中 use_pure 默认为 False。
```py
import mysql.connector

cnx = mysql.connector.connect(user='learn', password='password',
                              host='127.0.0.1',
                              database='employees',
                              use_pure=False)
cnx.close()
```



### SSL 连接

```py
# Note (Example is valid for Python v2 and v3)
from __future__ import print_function

import sys

#sys.path.insert(0, 'python{0}/'.format(sys.version_info[0]))

import mysql.connector
from mysql.connector.constants import ClientFlag

config = {
    'user': 'ssluser',
    'password': 'password',
    'host': '127.0.0.1',
    'client_flags': [ClientFlag.SSL],
    'ssl_ca': '/opt/mysql/ssl/ca.pem',
    'ssl_cert': '/opt/mysql/ssl/client-cert.pem',
    'ssl_key': '/opt/mysql/ssl/client-key.pem',
}

cnx = mysql.connector.connect(**config)
cur = cnx.cursor(buffered=True)
cur.execute("SHOW STATUS LIKE 'Ssl_cipher'")
print(cur.fetchone())
cur.close()
cnx.close()
```


### 连接池 Connection Pooling

```py
cnx = mysql.connector.connect(pool_name = "mypool",
                              pool_size = 3,
                              database: "test",
                              user: "joe"
                              )

cnx = mysql.connector.connect(pool_name = "mypool", pool_size = 3)
cnx = mysql.connector.connect(pool_name = "mypool", **dbconfig)
cnx = mysql.connector.connect(pool_name = "mypool")
```


```py
dbconfig = {
  "database": "test",
  "user":     "joe"
}

```

显示的声明连接池
```py
cnxpool = mysql.connector.pooling.MySQLConnectionPool(pool_name = "mypool",
                                                      pool_size = 3,
                                                      **dbconfig)

cnx1 = cnxpool.get_connection()
cnx2 = cnxpool.get_connection()

# 如果使用显示的声明连接池，我们可以使用 set_config 方法来修改连接池信息
dbconfig = {
  "database": "performance_schema",
  "user":     "admin",
  "password": "password"
}

cnxpool.set_config(**dbconfig)
```



### [利用配置文件连接](https://dev.mysql.com/doc/connector-python/en/connector-python-option-files.html)

Two arguments for the connect() call control use of option files in Connector/Python programs:
* option_files: Which option files to read. The value can be a file path name (a string) or a sequence of path name strings. By default, Connector/Python reads no option files, so this argument must be given explicitly to cause option files to be read. Files are read in the order specified.
* option_groups: Which groups to read from option files, if option files are read. The value can be an option group name (a string) or a sequence of group name strings. If this argument is not given, the default value is ['client', 'connector_python'], to read the [client] and [connector_python] groups.
```py
cnx = mysql.connector.connect(option_files='/etc/mysql/connectors.cnf',
                              option_groups='connector_python')
```



### 使用 C 扩展模块连接

导入 `_mysql_connector` 而不是 `mysql.connector`,然后使用 `_mysql_connector.MySQL()` 来初始化连接对象。

```py
import _mysql_connector

ccnx = _mysql_connector.MySQL()
ccnx.connect(user='learn', password='password',
             host='127.0.0.1', database='employees')

ccnx.query("SHOW VARIABLES LIKE 'version%'")
row = ccnx.fetch_row()
while row:
  print(row)
  row = ccnx.fetch_row()
ccnx.free_result()

ccnx.close()
```



### [Django Configuration](https://dev.mysql.com/doc/connector-python/en/connector-python-django-backend.html)

Django 配置文件 `settings.py` 中包含了对[数据库的配置选项](https://docs.djangoproject.com/en/1.5/ref/settings/#std:setting-DATABASES)

```py
DATABASES = {
    'default': {
        'NAME': 'user_data',
        'ENGINE': 'mysql.connector.django',
        'USER': 'mysql_user',
        'PASSWORD': 'password',
        'OPTIONS': {
          'autocommit': True,
        },
    }
}
```
使用 OPTIONS 选项可以添加更多配置选项。




## 初始化游标 cursor

```py
import mysql.connector

cnx = mysql.connector.connect(user='learn', password='Aa123456')
cursor = cnx.cursor()

cursor.close()
cnx.close()
```






## 建表


```py
from __future__ import print_function

import mysql.connector
from mysql.connector import errorcode

DB_NAME = 'employees'

TABLES = {}
TABLES['employees'] = (
    "CREATE TABLE `employees` ("
    "  `emp_no` int(11) NOT NULL AUTO_INCREMENT,"
    "  `birth_date` date NOT NULL,"
    "  `first_name` varchar(14) NOT NULL,"
    "  `last_name` varchar(16) NOT NULL,"
    "  `gender` enum('M','F') NOT NULL,"
    "  `hire_date` date NOT NULL,"
    "  PRIMARY KEY (`emp_no`)"
    ") ENGINE=InnoDB")

TABLES['departments'] = (
    "CREATE TABLE `departments` ("
    "  `dept_no` char(4) NOT NULL,"
    "  `dept_name` varchar(40) NOT NULL,"
    "  PRIMARY KEY (`dept_no`), UNIQUE KEY `dept_name` (`dept_name`)"
    ") ENGINE=InnoDB")

TABLES['salaries'] = (
    "CREATE TABLE `salaries` ("
    "  `emp_no` int(11) NOT NULL,"
    "  `salary` int(11) NOT NULL,"
    "  `from_date` date NOT NULL,"
    "  `to_date` date NOT NULL,"
    "  PRIMARY KEY (`emp_no`,`from_date`), KEY `emp_no` (`emp_no`),"
    "  CONSTRAINT `salaries_ibfk_1` FOREIGN KEY (`emp_no`) "
    "     REFERENCES `employees` (`emp_no`) ON DELETE CASCADE"
    ") ENGINE=InnoDB")

TABLES['dept_emp'] = (
    "CREATE TABLE `dept_emp` ("
    "  `emp_no` int(11) NOT NULL,"
    "  `dept_no` char(4) NOT NULL,"
    "  `from_date` date NOT NULL,"
    "  `to_date` date NOT NULL,"
    "  PRIMARY KEY (`emp_no`,`dept_no`), KEY `emp_no` (`emp_no`),"
    "  KEY `dept_no` (`dept_no`),"
    "  CONSTRAINT `dept_emp_ibfk_1` FOREIGN KEY (`emp_no`) "
    "     REFERENCES `employees` (`emp_no`) ON DELETE CASCADE,"
    "  CONSTRAINT `dept_emp_ibfk_2` FOREIGN KEY (`dept_no`) "
    "     REFERENCES `departments` (`dept_no`) ON DELETE CASCADE"
    ") ENGINE=InnoDB")

TABLES['dept_manager'] = (
    "  CREATE TABLE `dept_manager` ("
    "  `emp_no` int(11) NOT NULL,"
    "  `dept_no` char(4) NOT NULL,"
    "  `from_date` date NOT NULL,"
    "  `to_date` date NOT NULL,"
    "  PRIMARY KEY (`emp_no`,`dept_no`),"
    "  KEY `emp_no` (`emp_no`),"
    "  KEY `dept_no` (`dept_no`),"
    "  CONSTRAINT `dept_manager_ibfk_1` FOREIGN KEY (`emp_no`) "
    "     REFERENCES `employees` (`emp_no`) ON DELETE CASCADE,"
    "  CONSTRAINT `dept_manager_ibfk_2` FOREIGN KEY (`dept_no`) "
    "     REFERENCES `departments` (`dept_no`) ON DELETE CASCADE"
    ") ENGINE=InnoDB")

TABLES['titles'] = (
    "CREATE TABLE `titles` ("
    "  `emp_no` int(11) NOT NULL,"
    "  `title` varchar(50) NOT NULL,"
    "  `from_date` date NOT NULL,"
    "  `to_date` date DEFAULT NULL,"
    "  PRIMARY KEY (`emp_no`,`title`,`from_date`), KEY `emp_no` (`emp_no`),"
    "  CONSTRAINT `titles_ibfk_1` FOREIGN KEY (`emp_no`)"
    "     REFERENCES `employees` (`emp_no`) ON DELETE CASCADE"
    ") ENGINE=InnoDB")

cnx = mysql.connector.connect(user='learn', password='Aa123456')
cursor = cnx.cursor()


def create_database(cursor):
    try:
        cursor.execute(
            "CREATE DATABASE {} DEFAULT CHARACTER SET 'utf8'".format(DB_NAME))
    except mysql.connector.Error as err:
        print("Failed creating database: {}".format(err))
        exit(1)

try:
    cursor.execute("USE {}".format(DB_NAME))
except mysql.connector.Error as err:
    print("Database {} does not exists.".format(DB_NAME))
    if err.errno == errorcode.ER_BAD_DB_ERROR:
        create_database(cursor)
        print("Database {} created successfully.".format(DB_NAME))
        cnx.database = DB_NAME
    else:
        print(err)
        exit(1)


for table_name in TABLES:
    table_description = TABLES[table_name]
    try:
        print("Creating table {}: ".format(table_name), end='')
        cursor.execute(table_description)
    except mysql.connector.Error as err:
        if err.errno == errorcode.ER_TABLE_EXISTS_ERROR:
            print("already exists.")
        else:
            print(err.msg)
    else:
        print("OK")

cursor.close()
cnx.close()
```



## 插入数据

```py
from __future__ import print_function
from datetime import date, datetime, timedelta
import mysql.connector

cnx = mysql.connector.connect(user='learn', database='employees')
cursor = cnx.cursor()

tomorrow = datetime.now().date() + timedelta(days=1)

add_employee = ("INSERT INTO employees "
               "(first_name, last_name, hire_date, gender, birth_date) "
               "VALUES (%s, %s, %s, %s, %s)")
add_salary = ("INSERT INTO salaries "
              "(emp_no, salary, from_date, to_date) "
              "VALUES (%(emp_no)s, %(salary)s, %(from_date)s, %(to_date)s)")

data_employee = ('Geert', 'Vanderkelen', tomorrow, 'M', date(1977, 6, 14))

# Insert new employee
cursor.execute(add_employee, data_employee)
emp_no = cursor.lastrowid

# Insert salary information
data_salary = {
  'emp_no': emp_no,
  'salary': 50000,
  'from_date': tomorrow,
  'to_date': date(9999, 1, 1),
}
cursor.execute(add_salary, data_salary)

# Make sure data is committed to the database
cnx.commit()

cursor.close()
cnx.close()
```



## 查询

```py
import datetime
import mysql.connector

cnx = mysql.connector.connect(user='learn', database='employees')
cursor = cnx.cursor()

query = ("SELECT first_name, last_name, hire_date FROM employees "
         "WHERE hire_date BETWEEN %s AND %s")

hire_start = datetime.date(1999, 1, 1)
hire_end = datetime.date(1999, 12, 31)

cursor.execute(query, (hire_start, hire_end))

for (first_name, last_name, hire_date) in cursor:
  print("{}, {} was hired on {:%d %b %Y}".format(
    last_name, first_name, hire_date))

cursor.close()
cnx.close()
```




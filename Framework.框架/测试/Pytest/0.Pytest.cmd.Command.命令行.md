# Pytest.Usage.Invocation

`pytest.main(['-s','pytest-demo.py模块名'])`，main方法中是传入的一个list格式，list中可以传入多个参数。

| 短格式 | 长格式             |                          | 示例                                                                    | 示例                                                                   |
| ------ | ------------------ | ------------------------ | ----------------------------------------------------------------------- | ---------------------------------------------------------------------- |
|        |                    | 指定文件                 | `pytest pytest-demo.py`                                                 | 只执行 pytest-demo.py 中的测试                                         |
|        |                    | 指定目录                 | `pytest.main(['./'])`                                                   | 运行./目录下所有（test_*.py  和 *_test.py）                            |
|        |                    |                          | `pytest.main(['./subpath1/'])`                                          | 运行./subpath1 目录下用例                                              |
|        |                    | 指定目录下的文件         | `pytest.main(['./subpath1/test_module1.py'])`                           | 运行./subpath1 目录下 test_module1                                     |
|        | `::`               | 指定目录下的文件中用例   | `pytest.main(['./subpath1/test_module1.py::test_m1_1'])`                | 运行./subpath1 目录下 test_module1 中的 test_m1_1, test_m1_1称为nodeID |
|        |                    |                          | `pytest.main(['./subpath2/test_module2.py::TestM2::test_m2_02'])`       | 运行./subpath2 目录下 test_module2 中的 TestM2 类中的 test_m2_02       |
| `-h`   | `--help`           | 帮助信息                 |                                                                         |                                                                        |
| `-s`   |                    | 输出调试信息             | `pytest.main(['-s','pytest-demo.py'])`                                  |                                                                        |
| `-m`   |                    | 分组执行                 | `pytest -m "Group1"`                                                    | 选择 Group1                                                            |
|        |                    |                          | `pytest -m "Group1 or Group2" `                                         | 多个分组使用 or 连接， 选择 Group1和Group2                             |
| `-v`   |                    | 丰富信息模式             |                                                                         |                                                                        |
| `-q`   | `--quiet`          | 安静模式, 不输出环境信息 |                                                                         |                                                                        |
| `-k`   |                    | 指定单个关键字(包含)     | `pytest.main(['-k','pp'])`                                              | 匹配包含 pp 的用例(匹配目录名、模块名、类名、用例名)                   |
|        |                    | 指定多个关键字(任选一)   | `pytest.main(['-k','pp or spec'])`                                      | 匹配包含 pp 或 spec 的用例(匹配目录名、模块名、类名、用例名)           |
|        |                    | 指定除了关键字的用例     | `pytest.main(['-k','not pp'])`                                          | 匹配除了包含 pp 的用例(匹配目录名、模块名、类名、用例名)               |
|        |                    |                          | `pytest.main(['-k','pp','./subpath2/test_module2.py::TestM2'])`         | 匹配 TestM2 类中包含 pp 的用例                                         |
| `-x`   |                    | 有用例报错就停止         |                                                                         |                                                                        |
| `-rA`  |                    | 测试结果的简单统计       |                                                                         |                                                                        |
|        |                    |                          |                                                                         |                                                                        |
| ` `    | `--maxfail=X`      | 出现X个失败就终止测试    | `pytest.main(['-s','pytest-demo.py','--maxfail=1'])`                    |                                                                        |
| ` `    | `--version`        | pytest 版本              |                                                                         |                                                                        |
| ` `    | `--fixtures`       |                          |                                                                         |                                                                        |
|        |                    |                          |                                                                         |                                                                        |
| ` `    | `--html=path`      | 生成html格式测试报告     | `pytest-html`                                                           |
|        |                    |                          | `pytest.main(['-s','pytest-demo.py','--html=./report.html'])`           |                                                                        |
|        |                    |                          |                                                                         |                                                                        |
| ` `    | `--alluredir`      |                          |
|        |                    |                          | `pytest.main(['-s','test_example02.py','--alluredir','allure_result'])` | 生成 Allure 报告所需数据,                                              |
|        |                    |                          | `os.system('allure generate allure_result -o allure_report --clean')`   | 生成 Allure HTML 报告文件                                              |
|        |                    |                          |                                                                         |                                                                        |
| `-n=X` |                    | 多线程运行（X线程）      | `pytest-xdist`                                                          |
|        |                    |                          | `pytest.main(['-s','pytest-demo.py','-n=2'])`                           |                                                                        |
|        |                    |                          |                                                                         |                                                                        |
| ` `    | `--reruns X`       | 失败重试X次测试用例      | `pytest-rerunfailures`                                                  |
|        |                    |                          | `pytest pytest-demo.py --reruns 2`                                      |                                                                        |
| ` `    | `--reruns-delay=X` | 重新运行的(X秒)延迟      |                                                                         |                                                                        |
|        |                    |                          |                                                                         |                                                                        |
|        |                    |                          |                                                                         |                                                                        |



## 获取有关版本、选项名称和环境变量的帮助
| CMD                | 描述                                              |
| ------------------ | ------------------------------------------------- |
| pytest --version   | shows where pytest was imported from              |
| pytest --fixtures  | show available builtin function arguments         |
| pytest -h / --help | show help on command line and config file options |
|                    |                                                   |
|                    |                                                   |

## 第一次（或N次）故障后停止
| CMD                | 描述                  |
| ------------------ | --------------------- |
| pytest -x          | 第一个 failure 后停止 |
| pytest --maxfail=2 | 第N个 failure 后停止  |
|                    |                       |
|                    |                       |


## 指定测试/选择测试
| CMD                                          | 描述                                                                                                           |
| -------------------------------------------- | -------------------------------------------------------------------------------------------------------------- |
| `pytest test_mod.py`                         | Run tests in a module                                                                                          |
| `pytest testing/`                            | Run tests in a directory                                                                                       |
| `pytest -k "MyClass and not method"`         | Run tests by keyword expressions                                                                               |
| `pytest test_mod.py::test_func`              | Run tests by node ids                                                                                          |
| `pytest test_mod.py::TestClass::test_method` |                                                                                                                |
| `pytest -m slow`                             | Run tests by marker expressions， Will run all tests which are decorated with the @pytest.mark.slow decorator. |
| `pytest --pyargs pkg.testing`                | Run tests from packages                                                                                        |
|                                              |                                                                                                                |
|                                              |                                                                                                                |




## Calling pytest from Python code
| CMD                                          | 描述 |
| -------------------------------------------- | ---- |
| `pytest.main()                             ` |      |
| `pytest.main(["-x", "mytestdir"])          ` |      |
| `pytest.main(["-qq"], plugins=[MyPlugin()])` |      |
|                                              |      |
|                                              |      |




## 可能的退出代码

```py
from pytest import ExitCode
```
六种退出代码
| 代码        | 解释                                                      |
| ----------- | --------------------------------------------------------- |
| Exit code 0 | All tests were collected and passed successfully          |
| Exit code 1 | Tests were collected and run but some of the tests failed |
| Exit code 2 | Test execution was interrupted by the user                |
| Exit code 3 | Internal error happened while executing tests             |
| Exit code 4 | pytest command line usage error                           |
| Exit code 5 | No tests were collected                                   |
|             |                                                           |
|             |                                                           |

使用 pytest-custom_exit_code 插件定制退出代码.


|                                                   |                                                                       |
| ------------------------------------------------- | --------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| general:                                          |                                                                       |
| -k EXPRESSION                                     |                                                                       | only run tests which match the given substring expression. An expression is a python evaluatable expression where all names are substring-matched against test names and their parent classes. Example:                                      |
|                                                   |                                                                       | -k 'test_method or test_other' matches all test functions and classes whose name contains 'test_method' or 'test_other', while                                                                                                               |
|                                                   |                                                                       | -k 'not test_method' matches those that don't contain 'test_method' in their names.                                                                                                                                                          |
|                                                   |                                                                       | -k 'not test_method and not test_other' will eliminate the matches.                                                                                                                                                                          |
|                                                   |                                                                       | Additionally keywords are matched to classes and functions containing extra names in their 'extra_keyword_matches' set, as well as functions which have names assigned directly to them. The matching is case-insensitive.                   |
| -m MARKEXPR                                       |                                                                       | only run tests matching given mark expression.                                                                                                                                                                                               |
|                                                   |                                                                       | For example: -m 'mark1 and not mark2'.                                                                                                                                                                                                       |
|                                                   | --markers                                                             | show markers (builtin, plugin and per-project ones).                                                                                                                                                                                         |
| -x                                                | --exitfirst                                                           | exit instantly on first error or failed test.                                                                                                                                                                                                |
|                                                   | --fixtures, --funcargs                                                | show available fixtures, sorted by plugin appearance (fixtures with leading '_' are only shown with '-v')                                                                                                                                    |
|                                                   | --fixtures-per-test                                                   | show fixtures per test                                                                                                                                                                                                                       |
|                                                   | --pdb                                                                 | start the interactive Python debugger on errors or KeyboardInterrupt.                                                                                                                                                                        |
|                                                   | --pdbcls=modulename:classname                                         | start a custom interactive Python debugger on errors. For example: --pdbcls=IPython.terminal.debugger:TerminalPdb                                                                                                                            |
|                                                   | --trace                                                               | Immediately break when running each test.                                                                                                                                                                                                    |
|                                                   | --capture=method                                                      | per-test capturing method: one of `fd|sys|no|tee-sys`.                                                                                                                                                                                       |
| -s                                                |                                                                       | shortcut for --capture=no.                                                                                                                                                                                                                   |
|                                                   | --runxfail                                                            | report the results of xfail tests as if they were not marked                                                                                                                                                                                 |
|                                                   | --lf, --last-failed                                                   | rerun only the tests that failed at the last run (or all if none failed)                                                                                                                                                                     |
|                                                   | --ff, --failed-first                                                  | run all tests, but run the last failures first.                                                                                                                                                                                              |
|                                                   |                                                                       | This may re-order tests and thus lead to repeated fixture setup/teardown.                                                                                                                                                                    |
|                                                   | --nf, --new-first                                                     | run tests from new files first, then the rest of the tests sorted by file mtime                                                                                                                                                              |
|                                                   | --cache-show=[CACHESHOW]                                              | show cache contents, don't perform collection or tests. Optional argument: glob (default: '*').                                                                                                                                              |
|                                                   | --cache-clear                                                         | remove all cache contents at start of test run.                                                                                                                                                                                              |
|                                                   | --lfnf={all,none}, --last-failed-no-failures={all,none}               | which tests to run with no previously (known) failures.                                                                                                                                                                                      |
|                                                   | --sw, --stepwise                                                      | exit on test failure and continue from last failing test next time                                                                                                                                                                           |
|                                                   | --sw-skip, --stepwise-skip                                            | ignore the first failing test but stop on the next failing test                                                                                                                                                                              |
|                                                   | --allure-severities=SEVERITIES_SET                                    | Comma-separated list of severity names.                                                                                                                                                                                                      |
|                                                   |                                                                       | Tests only with these severities will be run.                                                                                                                                                                                                |
|                                                   |                                                                       | Possible values are: blocker, critical, normal, minor, trivial.                                                                                                                                                                              |
|                                                   | --allure-epics=EPICS_SET                                              | Comma-separated list of epic names.                                                                                                                                                                                                          |
|                                                   |                                                                       | Run tests that have at least one of the specified feature labels.                                                                                                                                                                            |
|                                                   | --allure-features=FEATURES_SET                                        | Comma-separated list of feature names.                                                                                                                                                                                                       |
|                                                   |                                                                       | Run tests that have at least one of the specified feature labels.                                                                                                                                                                            |
|                                                   | --allure-stories=STORIES_SET                                          | Comma-separated list of story names.                                                                                                                                                                                                         |
|                                                   |                                                                       | Run tests that have at least one of the specified story labels.                                                                                                                                                                              |
|                                                   | --allure-ids=IDS_SET                                                  | Comma-separated list of IDs.                                                                                                                                                                                                                 |
|                                                   |                                                                       | Run tests that have at least one of the specified id labels.                                                                                                                                                                                 |
|                                                   | --allure-link-pattern=LINK_TYPE:LINK_PATTERN                          | Url pattern for link type. Allows short links in test,                                                                                                                                                                                       |
|                                                   |                                                                       | like 'issue-1'. Text will be formatted to full url with python                                                                                                                                                                               |
|                                                   |                                                                       | str.format().                                                                                                                                                                                                                                |
|                                                   |                                                                       |                                                                                                                                                                                                                                              |
| reporting:                                        |                                                                       |                                                                                                                                                                                                                                              |
|                                                   | --durations=N                                                         | show N slowest setup/test durations (N=0 for all).                                                                                                                                                                                           |
|                                                   | --durations-min=N                                                     | Minimal duration in seconds for inclusion in slowest list. Default 0.005                                                                                                                                                                     |
| -v                                                | --verbose                                                             | increase verbosity.                                                                                                                                                                                                                          |
|                                                   | --no-header                                                           | disable header                                                                                                                                                                                                                               |
|                                                   | --no-summary                                                          | disable summary                                                                                                                                                                                                                              |
| -q                                                | --quiet                                                               | decrease verbosity.                                                                                                                                                                                                                          |
|                                                   | --verbosity=VERBOSE                                                   | set verbosity. Default is 0.                                                                                                                                                                                                                 |
| -r chars                                          |                                                                       | show extra test summary info as specified by chars: (f)ailed, (E)rror, (s)kipped, (x)failed, (X)passed, (p)assed, (P)assed with output, (a)ll except passed (p/P), or (A)ll. (w)arnings are enabled by default (see                          |
|                                                   |                                                                       | --disable-warnings), 'N' can be used to reset the list. (default: 'fE').                                                                                                                                                                     |
|                                                   | --disable-warnings, --disable-pytest-warnings                         | disable warnings summary                                                                                                                                                                                                                     |
| -l                                                | --showlocals                                                          | show locals in tracebacks (disabled by default).                                                                                                                                                                                             |
|                                                   | --tb=style                                                            | traceback print mode (auto/long/short/line/native/no).                                                                                                                                                                                       |
|                                                   | --show-capture={no,stdout,stderr,log,all}                             | Controls how captured stdout/stderr/log is shown on failed tests. Default is 'all'.                                                                                                                                                          |
|                                                   | --full-trace                                                          | don't cut any tracebacks (default is to cut).                                                                                                                                                                                                |
|                                                   | --color=color                                                         | color terminal output (yes/no/auto).                                                                                                                                                                                                         |
|                                                   | --code-highlight={yes,no}                                             | Whether code should be highlighted (only if --color is also enabled)                                                                                                                                                                         |
|                                                   | --pastebin=mode                                                       | send failed                                                                                                                                                                                                                                  | all info to bpaste.net pastebin service.                                                     |
|                                                   | --junit-xml=path                                                      | create junit-xml style report file at given path.                                                                                                                                                                                            |
|                                                   | --junit-prefix=str                                                    | prepend prefix to classnames in junit-xml output                                                                                                                                                                                             |
|                                                   | --html=path                                                           | create html report file at given path.                                                                                                                                                                                                       |
|                                                   | --self-contained-html                                                 | create a self-contained html file containing all necessary styles, scripts, and images - this means that the report may not render or function where CSP restrictions are in place (see https://developer.mozilla.org/docs/Web/Security/CSP) |
|                                                   | --css=path                                                            | append given css file content to report style file.                                                                                                                                                                                          |
|                                                   |                                                                       |                                                                                                                                                                                                                                              |
| pytest-warnings:                                  |                                                                       |                                                                                                                                                                                                                                              |
| -W PYTHONWARNINGS                                 | --pythonwarnings=PYTHONWARNINGS                                       | set which warnings to report, see -W option of python itself.                                                                                                                                                                                |
|                                                   | --maxfail=num                                                         | exit after first num failures or errors.                                                                                                                                                                                                     |
|                                                   | --strict-config                                                       | any warnings encountered while parsing the `pytest` section of the configuration file raise errors.                                                                                                                                          |
|                                                   | --strict-markers                                                      | markers not registered in the `markers` section of the configuration file raise errors.                                                                                                                                                      |
|                                                   | --strict                                                              | (deprecated) alias to --strict-markers.                                                                                                                                                                                                      |
| -c file                                           |                                                                       | load configuration from `file` instead of trying to locate one of the implicit configuration files.                                                                                                                                          |
|                                                   | --continue-on-collection-errors                                       | Force test execution even if collection errors occur.                                                                                                                                                                                        |
|                                                   | --rootdir=ROOTDIR                                                     | Define root directory for tests. Can be relative path: 'root_dir', './root_dir', 'root_dir/another_dir/'; absolute path: '/home/user/root_dir'; path with variables: '$HOME/root_dir'.                                                       |
|                                                   |                                                                       |                                                                                                                                                                                                                                              |
| collection:                                       |                                                                       |                                                                                                                                                                                                                                              |
|                                                   | --collect-only, --co                                                  | only collect tests, don't execute them.                                                                                                                                                                                                      |
|                                                   | --pyargs                                                              | try to interpret all arguments as python packages.                                                                                                                                                                                           |
|                                                   | --ignore=path                                                         | ignore path during collection (multi-allowed).                                                                                                                                                                                               |
|                                                   | --ignore-glob=path                                                    | ignore path pattern during collection (multi-allowed).                                                                                                                                                                                       |
|                                                   | --deselect=nodeid_prefix                                              | deselect item (via node id prefix) during collection (multi-allowed).                                                                                                                                                                        |
|                                                   | --confcutdir=dir                                                      | only load conftest.py's relative to specified dir.                                                                                                                                                                                           |
|                                                   | --noconftest                                                          | Don't load any conftest.py files.                                                                                                                                                                                                            |
|                                                   | --keep-duplicates                                                     | Keep duplicate tests.                                                                                                                                                                                                                        |
|                                                   | --collect-in-virtualenv                                               | Don't ignore tests in a local virtualenv directory                                                                                                                                                                                           |
|                                                   | --import-mode={prepend,append,importlib}                              | prepend/append to sys.path when importing test modules and conftest files, default is to prepend.                                                                                                                                            |
|                                                   | --doctest-modules                                                     | run doctests in all .py modules                                                                                                                                                                                                              |
|                                                   | --doctest-report={none,cdiff,ndiff,udiff,only_first_failure}          | choose another output format for diffs on doctest failure                                                                                                                                                                                    |
|                                                   | --doctest-glob=pat                                                    | doctests file matching pattern, default: test*.txt                                                                                                                                                                                           |
|                                                   | --doctest-ignore-import-errors                                        | ignore doctest ImportErrors                                                                                                                                                                                                                  |
|                                                   | --doctest-continue-on-failure                                         | for a given doctest, continue to run after the first failure                                                                                                                                                                                 |
|                                                   |                                                                       |                                                                                                                                                                                                                                              |
| test session debugging and configuration:         |                                                                       |                                                                                                                                                                                                                                              |
|                                                   | --basetemp=dir                                                        |                                                                                                                                                                                                                                              | base temporary directory for this test run.(warning: this directory is removed if it exists) |
| -V                                                | --version                                                             | display pytest version and information about plugins.When given twice, also display information about plugins.                                                                                                                               |
| -h                                                | --help                                                                | show help message and configuration info                                                                                                                                                                                                     |
| -p name                                           |                                                                       | early-load given plugin module name or entry point (multi-allowed).                                                                                                                                                                          |
|                                                   |                                                                       | To avoid loading of plugins, use the `no:` prefix, e.g. `no:doctest`.                                                                                                                                                                        |
|                                                   | --trace-config                                                        | trace considerations of conftest.py files.                                                                                                                                                                                                   |
|                                                   | --debug                                                               | store internal tracing debug information in 'pytestdebug.log'.                                                                                                                                                                               |
| -o OVERRIDE_INI                                   | --override-ini=OVERRIDE_INI                                           |
|                                                   |                                                                       | override ini option with "option=value" style, e.g. `-o xfail_strict=True -o cache_dir=cache`.                                                                                                                                               |
|                                                   | --assert=MODE                                                         | Control assertion debugging tools.                                                                                                                                                                                                           |
|                                                   |                                                                       | 'plain' performs no assertion debugging.                                                                                                                                                                                                     |
|                                                   |                                                                       | 'rewrite' (the default) rewrites assert statements in test modules on import to provide assert expression information.                                                                                                                       |
|                                                   | --setup-only                                                          | only setup fixtures, do not execute tests.                                                                                                                                                                                                   |
|                                                   | --setup-show                                                          | show setup of fixtures while executing tests.                                                                                                                                                                                                |
|                                                   | --setup-plan                                                          | show what fixtures and tests would be executed but don't execute anything.                                                                                                                                                                   |
|                                                   | --variables=path                                                      | path to variables file.                                                                                                                                                                                                                      |
|                                                   |                                                                       |                                                                                                                                                                                                                                              |
| logging:                                          |                                                                       |                                                                                                                                                                                                                                              |
|                                                   | --log-level=LEVEL     level of messages to catch/display.             |
|                                                   |                                                                       | Not set by default, so it depends on the root/parent log handler's effective level, where it is "WARNING" by default.                                                                                                                        |
|                                                   | --log-format=LOG_FORMAT                                               |
|                                                   |                                                                       | log format as used by the logging module.                                                                                                                                                                                                    |
|                                                   | --log-date-format=LOG_DATE_FORMAT                                     |
|                                                   |                                                                       | log date format as used by the logging module.                                                                                                                                                                                               |
|                                                   | --log-cli-level=LOG_CLI_LEVEL                                         |
|                                                   |                                                                       | cli logging level.                                                                                                                                                                                                                           |
|                                                   | --log-cli-format=LOG_CLI_FORMAT                                       |
|                                                   |                                                                       | log format as used by the logging module.                                                                                                                                                                                                    |
|                                                   | --log-cli-date-format=LOG_CLI_DATE_FORMAT                             |
|                                                   |                                                                       | log date format as used by the logging module.                                                                                                                                                                                               |
|                                                   | --log-file=LOG_FILE   path to a file when logging will be written to. |
|                                                   | --log-file-level=LOG_FILE_LEVEL                                       |
|                                                   |                                                                       | log file logging level.                                                                                                                                                                                                                      |
|                                                   | --log-file-format=LOG_FILE_FORMAT                                     |
|                                                   |                                                                       | log format as used by the logging module.                                                                                                                                                                                                    |
|                                                   | --log-file-date-format=LOG_FILE_DATE_FORMAT                           |
|                                                   |                                                                       | log date format as used by the logging module.                                                                                                                                                                                               |
|                                                   | --log-auto-indent=LOG_AUTO_INDENT                                     |
|                                                   |                                                                       | Auto-indent multiline messages passed to the logging module. Accepts true                                                                                                                                                                    | on, false                                                                                    | off or an integer. |
|                                                   |                                                                       |                                                                                                                                                                                                                                              |
| reporting:                                        |                                                                       |                                                                                                                                                                                                                                              |
|                                                   | --alluredir=DIR                                                       | Generate Allure report in the specified directory (may not exist)                                                                                                                                                                            |
|                                                   | --clean-alluredir                                                     | Clean alluredir folder if it exists                                                                                                                                                                                                          |
|                                                   | --allure-no-capture                                                   | Do not attach pytest captured logging/stdout/stderr to report                                                                                                                                                                                |
|                                                   |                                                                       |                                                                                                                                                                                                                                              |
| forked subprocess test execution:                 |                                                                       |                                                                                                                                                                                                                                              |
|                                                   | --forked                                                              | box each test run in a separate process (unix)                                                                                                                                                                                               |
| re-run failing tests to eliminate flaky failures: |                                                                       |                                                                                                                                                                                                                                              |
|                                                   | --only-rerun=ONLY_RERUN                                               |
|                                                   |                                                                       | If passed, only rerun errors matching the regex provided. Pass this flag multiple times to accumulate a list of regexes to match                                                                                                             |
|                                                   | --reruns=RERUNS                                                       | number of times to re-run failed tests. defaults to 0.                                                                                                                                                                                       |
|                                                   | --reruns-delay=RERUNS_DELAY                                           |
|                                                   |                                                                       | add time (seconds) delay between reruns.                                                                                                                                                                                                     |
|                                                   |                                                                       |                                                                                                                                                                                                                                              |
| selenium:                                         |                                                                       |                                                                                                                                                                                                                                              |
|                                                   | --firefox-path=path                                                   | path to the firefox binary.                                                                                                                                                                                                                  |
|                                                   | --firefox-preference=name value                                       |
|                                                   |                                                                       | additional firefox preferences.                                                                                                                                                                                                              |
|                                                   | --firefox-profile=path                                                |
|                                                   |                                                                       | path to the firefox profile.                                                                                                                                                                                                                 |
|                                                   | --firefox-extension=path                                              |
|                                                   |                                                                       | path to a firefox extension.                                                                                                                                                                                                                 |
|                                                   | --driver=str                                                          | webdriver implementation.                                                                                                                                                                                                                    |
|                                                   | --driver-path=path                                                    | path to the driver executable.                                                                                                                                                                                                               |
|                                                   | --capability=key value                                                |
|                                                   |                                                                       | additional capabilities.                                                                                                                                                                                                                     |
|                                                   | --event-listener=str                                                  | selenium eventlistener class, e.g. package.module.EventListenerClassName.                                                                                                                                                                    |
|                                                   | --host=str                                                            | DEPRECATED host that the selenium server is listening on, which will default to the cloud provider default or localhost.                                                                                                                     |
|                                                   | --port=num                                                            | DEPRECATED port that the selenium server is listening on, which will default to the cloud provider default or localhost.                                                                                                                     |
|                                                   | --selenium-host=str                                                   | host that the selenium server is listening on, which will default to the cloud provider default or localhost.                                                                                                                                |
|                                                   | --selenium-port=num                                                   | port that the selenium server is listening on, which will default to the cloud provider default or localhost.                                                                                                                                |
|                                                   |                                                                       |                                                                                                                                                                                                                                              |
| safety:                                           |                                                                       |                                                                                                                                                                                                                                              |
|                                                   | --sensitive-url=SENSITIVE_URL                                         | regular expression for identifying sensitive urls.                                                                                                                                                                                           |
|                                                   |                                                                       |                                                                                                                                                                                                                                              |
| distributed and subprocess testing:               |                                                                       |                                                                                                                                                                                                                                              |
| -n numprocesses                                   | --numprocesses=numprocesses                                           |
|                                                   |                                                                       | shortcut for '--dist=load --tx=NUM*popen', you can use 'auto' here for auto detection CPUs number on host system and it will be 0 when used with --pdb                                                                                       |
|                                                   | --maxprocesses=maxprocesses                                           |
|                                                   |                                                                       | limit the maximum number of workers to process the tests when using --numprocesses=auto                                                                                                                                                      |
|                                                   | --max-worker-restart=MAXWORKERRESTART                                 |
|                                                   |                                                                       | maximum number of workers that can be restarted when crashed (set to zero to disable this feature)                                                                                                                                           |
|                                                   | --dist=distmode                                                       | set mode for distributing tests to exec environments.                                                                                                                                                                                        |
|                                                   |                                                                       | each: send each test to all available environments.                                                                                                                                                                                          |
|                                                   |                                                                       | load: load balance by sending any pending test to any available environment.                                                                                                                                                                 |
|                                                   |                                                                       | loadscope: load balance by sending pending groups of tests in the same scope to any available environment.                                                                                                                                   |
|                                                   |                                                                       | loadfile: load balance by sending test grouped by file to any available environment.                                                                                                                                                         |
|                                                   |                                                                       | (default) no: run tests inprocess, don't distribute.                                                                                                                                                                                         |
|                                                   | --tx=xspec                                                            | add a test execution environment. some examples: --tx popen//python=python2.5 --tx socket=192.168.1.102:8888 --tx ssh=user@codespeak.net//chdir=testcache                                                                                    |
| -d                                                |                                                                       | load-balance tests.  shortcut for '--dist=load'                                                                                                                                                                                              |
|                                                   | --rsyncdir=DIR                                                        | add directory for rsyncing to remote tx nodes.                                                                                                                                                                                               |
|                                                   | --rsyncignore=GLOB                                                    | add expression for ignores when rsyncing to remote tx nodes.                                                                                                                                                                                 |
|                                                   | --boxed                                                               | backward compatibility alias for pytest-forked --forked                                                                                                                                                                                      |
|                                                   | --testrunuid=TESTRUNUID                                               |
|                                                   |                                                                       | provide an identifier shared amongst all workers as the value of the 'testrun_uid' fixture,                                                                                                                                                  |
|                                                   |                                                                       | ,if not provided, 'testrun_uid' is filled with a new unique string on every test run.                                                                                                                                                        |
| -f                                                | --looponfail                                                          | run tests in subprocess, wait for modified files and re-run failing test set until all pass.                                                                                                                                                 |



## pytest --help

```
PS F:\Development\Trials\tPytest\tryMarker\addMarkerBaseOnCaseName> pytest --help
usage: pytest [options] [file_or_dir] [file_or_dir] [...]

positional arguments:
  file_or_dir

general:
  -k EXPRESSION         only run tests which match the given substring expression. An expression is a python evaluatable expression where all names are substring-matched against test names and their parent classes. Example: -k
                        'test_method or test_other' matches all test functions and classes whose name contains 'test_method' or 'test_other', while -k 'not test_method' matches those that don't contain 'test_method' in their names. -k
                        'not test_method and not test_other' will eliminate the matches. Additionally keywords are matched to classes and functions containing extra names in their 'extra_keyword_matches' set, as well as functions which

                        have names assigned directly to them. The matching is case-insensitive.
  -m MARKEXPR           only run tests matching given mark expression.
                        For example: -m 'mark1 and not mark2'.
  --markers             show markers (builtin, plugin and per-project ones).
  -x, --exitfirst       exit instantly on first error or failed test.
  --fixtures, --funcargs
                        show available fixtures, sorted by plugin appearance (fixtures with leading '_' are only shown with '-v')
  --fixtures-per-test   show fixtures per test
  --pdb                 start the interactive Python debugger on errors or KeyboardInterrupt.
  --pdbcls=modulename:classname
                        start a custom interactive Python debugger on errors. For example: --pdbcls=IPython.terminal.debugger:TerminalPdb
  --trace               Immediately break when running each test.
  --capture=method      per-test capturing method: one of fd|sys|no|tee-sys.
  -s                    shortcut for --capture=no.
  --runxfail            report the results of xfail tests as if they were not marked
  --lf, --last-failed   rerun only the tests that failed at the last run (or all if none failed)
  --ff, --failed-first  run all tests, but run the last failures first.
                        This may re-order tests and thus lead to repeated fixture setup/teardown.
  --nf, --new-first     run tests from new files first, then the rest of the tests sorted by file mtime
  --cache-show=[CACHESHOW]
                        show cache contents, don't perform collection or tests. Optional argument: glob (default: '*').
  --cache-clear         remove all cache contents at start of test run.
  --lfnf={all,none}, --last-failed-no-failures={all,none}
                        which tests to run with no previously (known) failures.
  --sw, --stepwise      exit on test failure and continue from last failing test next time
  --sw-skip, --stepwise-skip
                        ignore the first failing test but stop on the next failing test
  --allure-severities=SEVERITIES_SET
                        Comma-separated list of severity names.
                        Tests only with these severities will be run.
                        Possible values are: blocker, critical, normal, minor, trivial.
  --allure-epics=EPICS_SET
                        Comma-separated list of epic names.
                        Run tests that have at least one of the specified feature labels.
  --allure-features=FEATURES_SET
                        Comma-separated list of feature names.
                        Run tests that have at least one of the specified feature labels.
  --allure-stories=STORIES_SET
                        Comma-separated list of story names.
                        Run tests that have at least one of the specified story labels.
  --allure-ids=IDS_SET  Comma-separated list of IDs.
                        Run tests that have at least one of the specified id labels.
  --allure-link-pattern=LINK_TYPE:LINK_PATTERN
                        Url pattern for link type. Allows short links in test,
                        like 'issue-1'. Text will be formatted to full url with python
                        str.format().

reporting:
  --durations=N         show N slowest setup/test durations (N=0 for all).
  --durations-min=N     Minimal duration in seconds for inclusion in slowest list. Default 0.005
  -v, --verbose         increase verbosity.
  --no-header           disable header
  --no-summary          disable summary
  -q, --quiet           decrease verbosity.
  --verbosity=VERBOSE   set verbosity. Default is 0.
  -r chars              show extra test summary info as specified by chars: (f)ailed, (E)rror, (s)kipped, (x)failed, (X)passed, (p)assed, (P)assed with output, (a)ll except passed (p/P), or (A)ll. (w)arnings are enabled by default (see

                        --disable-warnings), 'N' can be used to reset the list. (default: 'fE').
  --disable-warnings, --disable-pytest-warnings
                        disable warnings summary
  -l, --showlocals      show locals in tracebacks (disabled by default).
  --tb=style            traceback print mode (auto/long/short/line/native/no).
  --show-capture={no,stdout,stderr,log,all}
                        Controls how captured stdout/stderr/log is shown on failed tests. Default is 'all'.
  --full-trace          don't cut any tracebacks (default is to cut).
  --color=color         color terminal output (yes/no/auto).
  --code-highlight={yes,no}
                        Whether code should be highlighted (only if --color is also enabled)
  --pastebin=mode       send failed|all info to bpaste.net pastebin service.
  --junit-xml=path      create junit-xml style report file at given path.
  --junit-prefix=str    prepend prefix to classnames in junit-xml output
  --html=path           create html report file at given path.
  --self-contained-html
                        create a self-contained html file containing all necessary styles, scripts, and images - this means that the report may not render or function where CSP restrictions are in place (see
                        https://developer.mozilla.org/docs/Web/Security/CSP)
  --css=path            append given css file content to report style file.

pytest-warnings:
  -W PYTHONWARNINGS, --pythonwarnings=PYTHONWARNINGS
                        set which warnings to report, see -W option of python itself.
  --maxfail=num         exit after first num failures or errors.
  --strict-config       any warnings encountered while parsing the `pytest` section of the configuration file raise errors.
  --strict-markers      markers not registered in the `markers` section of the configuration file raise errors.
  --strict              (deprecated) alias to --strict-markers.
  -c file               load configuration from `file` instead of trying to locate one of the implicit configuration files.
  --continue-on-collection-errors
                        Force test execution even if collection errors occur.
  --rootdir=ROOTDIR     Define root directory for tests. Can be relative path: 'root_dir', './root_dir', 'root_dir/another_dir/'; absolute path: '/home/user/root_dir'; path with variables: '$HOME/root_dir'.

collection:
  --collect-only, --co  only collect tests, don't execute them.
  --pyargs              try to interpret all arguments as python packages.
  --ignore=path         ignore path during collection (multi-allowed).
  --ignore-glob=path    ignore path pattern during collection (multi-allowed).
  --deselect=nodeid_prefix
                        deselect item (via node id prefix) during collection (multi-allowed).
  --confcutdir=dir      only load conftest.py's relative to specified dir.
  --noconftest          Don't load any conftest.py files.
  --keep-duplicates     Keep duplicate tests.
  --collect-in-virtualenv
                        Don't ignore tests in a local virtualenv directory
  --import-mode={prepend,append,importlib}
                        prepend/append to sys.path when importing test modules and conftest files, default is to prepend.
  --doctest-modules     run doctests in all .py modules
  --doctest-report={none,cdiff,ndiff,udiff,only_first_failure}
                        choose another output format for diffs on doctest failure
  --doctest-glob=pat    doctests file matching pattern, default: test*.txt
  --doctest-ignore-import-errors
                        ignore doctest ImportErrors
  --doctest-continue-on-failure
                        for a given doctest, continue to run after the first failure

test session debugging and configuration:
  --basetemp=dir        base temporary directory for this test run.(warning: this directory is removed if it exists)
  -V, --version         display pytest version and information about plugins.When given twice, also display information about plugins.
  -h, --help            show help message and configuration info
  -p name               early-load given plugin module name or entry point (multi-allowed).
                        To avoid loading of plugins, use the `no:` prefix, e.g. `no:doctest`.
  --trace-config        trace considerations of conftest.py files.
  --debug               store internal tracing debug information in 'pytestdebug.log'.
  -o OVERRIDE_INI, --override-ini=OVERRIDE_INI
                        override ini option with "option=value" style, e.g. `-o xfail_strict=True -o cache_dir=cache`.
  --assert=MODE         Control assertion debugging tools.
                        'plain' performs no assertion debugging.
                        'rewrite' (the default) rewrites assert statements in test modules on import to provide assert expression information.
  --setup-only          only setup fixtures, do not execute tests.
  --setup-show          show setup of fixtures while executing tests.
  --setup-plan          show what fixtures and tests would be executed but don't execute anything.
  --variables=path      path to variables file.

logging:
  --log-level=LEVEL     level of messages to catch/display.
                        Not set by default, so it depends on the root/parent log handler's effective level, where it is "WARNING" by default.
  --log-format=LOG_FORMAT
                        log format as used by the logging module.
  --log-date-format=LOG_DATE_FORMAT
                        log date format as used by the logging module.
  --log-cli-level=LOG_CLI_LEVEL
                        cli logging level.
  --log-cli-format=LOG_CLI_FORMAT
                        log format as used by the logging module.
  --log-cli-date-format=LOG_CLI_DATE_FORMAT
                        log date format as used by the logging module.
  --log-file=LOG_FILE   path to a file when logging will be written to.
  --log-file-level=LOG_FILE_LEVEL
                        log file logging level.
  --log-file-format=LOG_FILE_FORMAT
                        log format as used by the logging module.
  --log-file-date-format=LOG_FILE_DATE_FORMAT
                        log date format as used by the logging module.
  --log-auto-indent=LOG_AUTO_INDENT
                        Auto-indent multiline messages passed to the logging module. Accepts true|on, false|off or an integer.

reporting:
  --alluredir=DIR       Generate Allure report in the specified directory (may not exist)
  --clean-alluredir     Clean alluredir folder if it exists
  --allure-no-capture   Do not attach pytest captured logging/stdout/stderr to report

forked subprocess test execution:
  --forked              box each test run in a separate process (unix)

re-run failing tests to eliminate flaky failures:
  --only-rerun=ONLY_RERUN
                        If passed, only rerun errors matching the regex provided. Pass this flag multiple times to accumulate a list of regexes to match
  --reruns=RERUNS       number of times to re-run failed tests. defaults to 0.
  --reruns-delay=RERUNS_DELAY
                        add time (seconds) delay between reruns.

selenium:
  --firefox-path=path   path to the firefox binary.
  --firefox-preference=name value
                        additional firefox preferences.
  --firefox-profile=path
                        path to the firefox profile.
  --firefox-extension=path
                        path to a firefox extension.
  --driver=str          webdriver implementation.
  --driver-path=path    path to the driver executable.
  --capability=key value
                        additional capabilities.
  --event-listener=str  selenium eventlistener class, e.g. package.module.EventListenerClassName.
  --host=str            DEPRECATED host that the selenium server is listening on, which will default to the cloud provider default or localhost.
  --port=num            DEPRECATED port that the selenium server is listening on, which will default to the cloud provider default or localhost.
  --selenium-host=str   host that the selenium server is listening on, which will default to the cloud provider default or localhost.
  --selenium-port=num   port that the selenium server is listening on, which will default to the cloud provider default or localhost.

safety:
  --sensitive-url=SENSITIVE_URL
                        regular expression for identifying sensitive urls.

distributed and subprocess testing:
  -n numprocesses, --numprocesses=numprocesses
                        shortcut for '--dist=load --tx=NUM*popen', you can use 'auto' here for auto detection CPUs number on host system and it will be 0 when used with --pdb
  --maxprocesses=maxprocesses
                        limit the maximum number of workers to process the tests when using --numprocesses=auto
  --max-worker-restart=MAXWORKERRESTART
                        maximum number of workers that can be restarted when crashed (set to zero to disable this feature)
  --dist=distmode       set mode for distributing tests to exec environments.
                        each: send each test to all available environments.
                        load: load balance by sending any pending test to any available environment.
                        loadscope: load balance by sending pending groups of tests in the same scope to any available environment.
                        loadfile: load balance by sending test grouped by file to any available environment.
                        (default) no: run tests inprocess, don't distribute.
  --tx=xspec            add a test execution environment. some examples: --tx popen//python=python2.5 --tx socket=192.168.1.102:8888 --tx ssh=user@codespeak.net//chdir=testcache
  -d                    load-balance tests.  shortcut for '--dist=load'
  --rsyncdir=DIR        add directory for rsyncing to remote tx nodes.
  --rsyncignore=GLOB    add expression for ignores when rsyncing to remote tx nodes.
  --boxed               backward compatibility alias for pytest-forked --forked
  --testrunuid=TESTRUNUID
                        provide an identifier shared amongst all workers as the value of the 'testrun_uid' fixture,
                        ,if not provided, 'testrun_uid' is filled with a new unique string on every test run.
  -f, --looponfail      run tests in subprocess, wait for modified files and re-run failing test set until all pass.

custom options:
  --base-url=url        base url for the application under test.
  --verify-base-url     verify the base url.
  --metadata=key value  additional metadata.
  --metadata-from-json=METADATA_FROM_JSON
                        additional metadata from a json string.

[pytest] ini-options in the first pytest.ini|tox.ini|setup.cfg file found:

  markers (linelist):   markers for test functions
  empty_parameter_set_mark (string):
                        default marker for empty parametersets
  norecursedirs (args): directory patterns to avoid for recursion
  testpaths (args):     directories to search for tests when no files or directories are given in the command line.
  filterwarnings (linelist):
                        Each line specifies a pattern for warnings.filterwarnings. Processed after -W/--pythonwarnings.
  usefixtures (args):   list of default fixtures to be used with this project
  python_files (args):  glob-style file patterns for Python test module discovery
  python_classes (args):
                        prefixes or glob names for Python test class discovery
  python_functions (args):
                        prefixes or glob names for Python test function and method discovery
  disable_test_id_escaping_and_forfeit_all_rights_to_community_support (bool):
                        disable string escape non-ascii characters, might cause unwanted side effects(use at your own risk)
  console_output_style (string):
                        console output: "classic", or with additional progress information ("progress" (percentage) | "count").
  xfail_strict (bool):  default for the strict parameter of xfail markers when not given explicitly (default: False)
  enable_assertion_pass_hook (bool):
                        Enables the pytest_assertion_pass hook.Make sure to delete any previously generated pyc cache files.
  junit_suite_name (string):
                        Test suite name for JUnit report
  junit_logging (string):
                        Write captured log messages to JUnit report: one of no|log|system-out|system-err|out-err|all
  junit_log_passing_tests (bool):
                        Capture log information for passing tests to JUnit report:
  junit_duration_report (string):
                        Duration time to report: one of total|call
  junit_family (string):
                        Emit XML for schema: one of legacy|xunit1|xunit2
  doctest_optionflags (args):
                        option flags for doctests
  doctest_encoding (string):
                        encoding used for doctest files
  cache_dir (string):   cache directory path.
  log_level (string):   default value for --log-level
  log_format (string):  default value for --log-format
  log_date_format (string):
                        default value for --log-date-format
  log_cli (bool):       enable log display during test run (also known as "live logging").
  log_cli_level (string):
                        default value for --log-cli-level
  log_cli_format (string):
                        default value for --log-cli-format
  log_cli_date_format (string):
                        default value for --log-cli-date-format
  log_file (string):    default value for --log-file
  log_file_level (string):
                        default value for --log-file-level
  log_file_format (string):
                        default value for --log-file-format
  log_file_date_format (string):
                        default value for --log-file-date-format
  log_auto_indent (string):
                        default value for --log-auto-indent
  faulthandler_timeout (string):
                        Dump the traceback of all threads if a test takes more than TIMEOUT seconds to finish.
  addopts (args):       extra command line options
  minversion (string):  minimally required pytest version
  required_plugins (args):
                        plugins that must be present for pytest to run
  base_url (string):    base url for the application under test.
  render_collapsed (bool):
                        Open the report with all rows collapsed. Useful for very large reports
  max_asset_filename_length (string):
                        set the maximum filename length for assets attached to the html report.
  selenium_capture_debug (string):
                        when debug is captured ('never', 'failure', 'always')
  selenium_exclude_debug (string):
                        debug to exclude from capture
  saucelabs_job_auth (string):
                        Authorization options for the Sauce Labs job: ('none', 'token', 'hour', 'day')
  max_driver_init_attempts (string):
                        Maximum number of driver initialization attempts
  sensitive_url (string):
                        regular expression for identifying sensitive urls.
  yaml_loader (string): Which loader to use when parsing yaml
  rsyncdirs (pathlist): list of (relative) paths to be rsynced for remote distributed testing.
  rsyncignore (pathlist):
                        list of (relative) glob-style paths to be ignored for rsyncing.
  looponfailroots (pathlist):
                        directories to check for changes

environment variables:
  PYTEST_ADDOPTS           extra command line options
  PYTEST_PLUGINS           comma-separated plugins to load during startup
  PYTEST_DISABLE_PLUGIN_AUTOLOAD set to disable plugin auto-loading
  PYTEST_DEBUG             set to enable debug tracing of pytest's internals


to see available markers type: pytest --markers
to see available fixtures type: pytest --fixtures
(shown according to specified file_or_dir or current dir if not specified; fixtures with leading '_' are only shown with the '-v' option
PS F:\Development\Trials\tPytest\tryMarker\addMarkerBaseOnCaseName>
```


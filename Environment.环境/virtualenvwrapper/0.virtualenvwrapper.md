# virtualenvwrapper

提供了一系列命令使得和虚拟环境工作变得愉快许多。它把您所有的虚拟环境都放在一个地方。

将您的所有虚拟环境在一个地方。
包装用于管理虚拟环境（创建，删除，复制）。
使用一个命令来环境之间进行切换。



```sh
mkvirtualenv [-a project_path] [-i package] [-r requirements_file] [virtualenv options] ENVNAME
```

```
PS E:\OneDrive\Doc> virtualenvwrapper

 virtualenvwrapper is a set of extensions to Ian Bicking's virtualenv
 tool.  The extensions include wrappers for creating and deleting
 virtual environments and otherwise managing your development workflow,
 making it easier to work on more than one project at a time without
 introducing conflicts in their dependencies.

 virtualenvwrapper-win is a port of Dough Hellman's virtualenvwrapper to Windows
 batch scripts.

 Commands available:
   add2virtualenv: add directory to the import path
   cdproject: change directory to the active project
   cdsitepackages: change to the site-packages directory
   cdvirtualenv: change to the $VIRTUAL_ENV directory
   lssitepackages: list contents of the site-packages directory
   lsvirtualenv: list virtualenvs
   mkproject: create a new project directory and its associated virtualenv
   mkvirtualenv: Create a new virtualenv in $WORKON_HOME
   rmvirtualenv: Remove a virtualenv
   setprojectdir: associate a project directory with a virtualenv
   toggleglobalsitepackages: turn access to global site-packages on/off
   virtualenvwrapper: show this help message
   whereis: return full path to executable on path.
   workon: list or change working virtualenvs
```




## Linux

安装（确保 virtualenv 已经安装了）：
```sh
pip install virtualenvwrapper
export WORKON_HOME=~/Envs  #设置环境变量
mkdir -p $WORKON_HOME #创建虚拟环境管理目录
find / -name virtualenvwrapper.sh #找到virtualenvwrapper.sh的路径
source 路径 #激活virtualenvwrapper.sh
```
默认virtualenvwrapper安装在下面python解释器中的site-packages，实际上需要运行virtualenvwrapper.sh文件才行；所以需要先进行配置一下：

找到virtualenvwrapper.sh的路径：find / -name virtualenvwrapper.sh 
运行virtualenvwrapper.sh文件：source 路径
ps：每次要想使用virtualenvwrapper 工具时，都必须先激活virtualenvwrapper.sh,另外，如果创建前要将即将的环境保存到Envs中，就要先设置一下环境变量：export WORKON_HOME=~/Envs，再搭建


### apt安装：
```sh
sudo apt-get install virtualenv                      # 安装virtualenv
sudo apt-get install virtualenvwrapper　　  # 安装virtualenvwrapper（安装此项之前，必须先安装virtualenv）
```

在当前的命令窗口中输入：`source /usr/share/virtualenvwrapper/virtualenvwrapper.sh`

home 目录下生成 .virtualenv 文件夹

进入 .virtualenv 目录下

```sh
mkvirtualenv [环境名]  　　           # 新建虚拟环境
deactivate 　　　　　　　　　　# 退出环境 workon 查看和使用
rmvirtualenv [虚拟环境名称]　　  # 删除xx环境
```

注意
* pip 和 apt 安装的位置不一样。
* pip 安装的包位于 /usr/local/lib/python2.7/dist-packages/
* apt 安装的包位于 /usr/lib/python2.7/dist-packages/
* 这里是使用apt安装的


### pip安装：
1. 安装虚拟命令

  ```sh
  pip install virtualenv
  pip install virtualenvwrapper
  ```

2. 配置虚拟环境
  1. 创建目录来存放虚拟环境

    ```sh
    mkdir $HOME/.virtualenvs
    ```

  2. 打开 ~/.bashrc 文件，并添加如下：

    ```sh
    export WORKON_HOME=$HOME/.virtualenvs
    source /usr/local/bin/virtualenvwrapper.sh
    ```

  3. source ~/.bashrc 后系统报错提示
    ```sh
    bash: /usr/local/bin/virtualenvwrapper.sh: 没有那个文件或目录
    ```

3. 修改~/.bashrc 中的内容为：

  ```sh
  export WORKON_HOME=$HOME/.virtualenvs
  source ~/.local/bin/virtualenvwrapper.sh
  ```

4. 如果出现Command '' not found, but can be installed with

  ```sh
  cd .local/bin
  vim virtualenvwrapper.sh
  ```
   在文件中将 `VIRTUALENVWRAPPER_PYTHON="$(command \which python)"` 改为 `VIRTUALENVWRAPPER_PYTHON="$(command \which python3)"`


### ref
* [Ubuntu下安装virtualenv，virtualenvwrapper](https://www.cnblogs.com/tmdhhl/articles/virtualenv.html)



## Windows

对于Windows，您可以使用 virtualenvwrapper-win

安装（确保 virtualenv 已经安装了）：

`pip install virtualenvwrapper-win`
在Windows中，WORKON_HOME默认的路径是 %USERPROFILE%Envs 。







## 基本使用

#### 创建一个虚拟环境：

`mkvirtualenv project_env` 这会在 Envs 中创建 project_env 虚拟环境

选择一个python解释器来搭建：`mkvirtualenv env  --python=python2.7`



#### 在虚拟环境上工作：

`workon project_env`

或者，您可以创建一个项目，它会创建虚拟环境，并在 $WORKON_HOME 中创建一个项目目录。 当您使用 workon project_env 时，会 cd -ed 到项目目录中。

`mkvirtualenv project_env`
virtualenvwrapper 提供环境名字的tab补全功能。当您有很多环境， 并且很难记住它们的名字时，这就显得很有用。

workon 也能停止您当前所在的环境，所以您可以在环境之间快速的切换。


#### 停止虚拟环境

`deactivate`


#### 删除：

`rmvirtualenv project_env`


#### 其他有用的命令

* `lsvirtualenv`    #列举所有的环境。
* `cdvirtualenv`    #导航到当前激活的虚拟环境的目录中，比如说这样您就能够浏览它的 site-packages。
* `cdsitepackages`   # 和上面的类似，但是是直接进入到 site-packages 目录中。
* `lssitepackages`     #显示 site-packages 目录中的内容。


[`virtualenvwrapper` 命令的完全列表](https://virtualenvwrapper.readthedocs.io/en/latest/command_ref.html)


